{% extends "base.html" %}

{% block title %}InÃ­cio - {{ usuario.nome }}{% endblock %}
{% block header_title %}â¤ï¸ Nosso App{% endblock %}

{% block content %}
<!-- Placar dos dois -->
<div class="card">
    <div style="display: flex; justify-content: space-around; text-align: center;">
        <div>
            <div style="font-size: 2.5rem; margin-bottom: 5px;">
                {% if usuario.foto %}
                    <img src="{{ url_for('uploaded_file', filename=usuario.foto) }}" style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover; border: 3px solid {{ usuario.cor }};">
                {% else %}
                    {{ usuario.emoji }}
                {% endif %}
            </div>
            <div style="font-weight: 700; color: #333;">{{ usuario.nome }}</div>
            <div style="font-size: 1.5rem; font-weight: 800; color: {{ usuario.cor }};">{{ usuario.saldo }}</div>
            <div style="font-size: 0.8rem; color: #888;">pontos</div>
        </div>
        <div style="display: flex; align-items: center; font-size: 1.5rem; color: #ccc;">VS</div>
        <div>
            <div style="font-size: 2.5rem; margin-bottom: 5px;">
                {% if parceiro.foto %}
                    <img src="{{ url_for('uploaded_file', filename=parceiro.foto) }}" style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover; border: 3px solid {{ parceiro.cor }};">
                {% else %}
                    {{ parceiro.emoji }}
                {% endif %}
            </div>
            <div style="font-weight: 700; color: #333;">{{ parceiro.nome }}</div>
            <div style="font-size: 1.5rem; font-weight: 800; color: {{ parceiro.cor }};">{{ parceiro.saldo }}</div>
            <div style="font-size: 0.8rem; color: #888;">pontos</div>
        </div>
    </div>
</div>

<!-- Menu Principal -->
<h2 style="color: white; margin-bottom: 15px; text-align: center;">O que deseja fazer?</h2>

<div class="menu-grid">
    <a href="{{ url_for('pagina_tarefas') }}" class="menu-item">
        <div class="menu-item-icon">ğŸ“</div>
        <div class="menu-item-title">Tarefas</div>
        {% if minhas_tarefas_pendentes > 0 %}
            <span class="menu-item-badge">{{ minhas_tarefas_pendentes }} pendentes</span>
        {% endif %}
    </a>
    
    <a href="{{ url_for('pagina_sugerir_recompensa') }}" class="menu-item">
        <div class="menu-item-icon">ğŸ’¡</div>
        <div class="menu-item-title">Sugerir Recompensa</div>
    </a>
    
    <a href="{{ url_for('pagina_aprovacoes') }}" class="menu-item">
        <div class="menu-item-icon">âš–ï¸</div>
        <div class="menu-item-title">AprovaÃ§Ãµes</div>
        {% if recompensas_para_aprovar > 0 %}
            <span class="menu-item-badge">{{ recompensas_para_aprovar }} nova(s)</span>
        {% endif %}
    </a>
    
    <a href="{{ url_for('pagina_loja') }}" class="menu-item">
        <div class="menu-item-icon">ğŸ›’</div>
        <div class="menu-item-title">Loja de Pontos</div>
        {% if minhas_recompensas_aprovadas > 0 %}
            <span class="menu-item-badge">{{ minhas_recompensas_aprovadas }} disponÃ­veis</span>
        {% endif %}
    </a>
    
    <a href="{{ url_for('pagina_historico_conclusoes') }}" class="menu-item">
        <div class="menu-item-icon">ğŸ“‹</div>
        <div class="menu-item-title">Hist. ConclusÃµes</div>
    </a>
    
    <a href="{{ url_for('pagina_historico_resgates') }}" class="menu-item">
        <div class="menu-item-icon">ğŸ«</div>
        <div class="menu-item-title">Hist. Resgates</div>
        {% if meus_vales_pendentes > 0 %}
            <span class="menu-item-badge">{{ meus_vales_pendentes }} vale(s)</span>
        {% endif %}
    </a>
</div>

<!-- EstatÃ­sticas -->
<div class="card" style="margin-top: 20px;">
    <div class="card-title">ğŸ“Š EstatÃ­sticas</div>
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; text-align: center;">
        <div style="background: #f8f9fa; padding: 15px; border-radius: 12px;">
            <div style="font-size: 1.5rem; font-weight: 800; color: {{ usuario.cor }};">{{ usuario.pontos_ganhos }}</div>
            <div style="font-size: 0.85rem; color: #888;">Pontos Ganhos</div>
        </div>
        <div style="background: #f8f9fa; padding: 15px; border-radius: 12px;">
            <div style="font-size: 1.5rem; font-weight: 800; color: #f44336;">{{ usuario.pontos_gastos }}</div>
            <div style="font-size: 0.85rem; color: #888;">Pontos Gastos</div>
        </div>
    </div>
</div>

<!-- Upload foto de perfil -->
<div class="card" style="margin-top: 15px;">
    <div class="card-title">ğŸ“¸ Foto de Perfil</div>
    <form action="{{ url_for('upload_foto_perfil') }}" method="POST" enctype="multipart/form-data">
        <div class="file-input-wrapper">
            <input type="file" name="foto" id="foto-perfil" accept="image/*" onchange="this.form.submit()">
            <label for="foto-perfil" class="file-input-label">
                Clique para trocar sua foto
            </label>
        </div>
    </form>
</div>
{% endblock %}
