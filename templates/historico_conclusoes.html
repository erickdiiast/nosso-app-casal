{% extends "base.html" %}

{% block title %}HistÃ³rico - {{ usuario.nome }}{% endblock %}
{% block header_title %}ğŸ“‹ Hist. ConclusÃµes{% endblock %}

{% block content %}
<a href="{{ url_for('dashboard') }}" class="back-link">â† Voltar</a>

<div style="display: flex; gap: 10px; margin-bottom: 20px;">
    <a href="{{ url_for('pagina_historico_conclusoes') }}" class="btn btn-primary" style="flex: 1;">ConclusÃµes</a>
    <a href="{{ url_for('pagina_historico_resgates') }}" class="btn" style="flex: 1; background: #f0f0f0; color: #666;">Resgates</a>
</div>

<div class="card">
    <div class="card-title">Tarefas ConcluÃ­das</div>
    
    {% if tarefas_concluidas %}
        {% for tarefa in tarefas_concluidas %}
        <div class="item">
            {% if tarefa.foto %}
            <div style="position: relative;">
                <img src="{{ url_for('uploaded_file', filename=tarefa.foto) }}" class="comprovante-foto" alt="ComprovaÃ§Ã£o">
                <div style="position: absolute; bottom: 10px; right: 10px; background: #4CAF50; color: white; padding: 4px 10px; border-radius: 15px; font-size: 0.75rem; font-weight: 700;">
                    âœ… COMPROVADO
                </div>
            </div>
            {% endif %}
            <div class="item-header">
                <span class="item-title">{{ tarefa.titulo }}</span>
                <span class="badge badge-success">+{{ tarefa.pontos }} pts</span>
            </div>
            <div class="item-meta">
                {% if tarefa.usuario_id == usuario.id %}
                    âœ… VocÃª completou
                {% else %}
                    âœ… {{ parceiro.nome }} completou
                {% endif %}
                em {{ tarefa.data_conclusao.strftime('%d/%m/%Y') }}
            </div>
        </div>
        {% endfor %}
    {% else %}
        <div class="empty-state">
            <div class="empty-state-icon">ğŸ“‹</div>
            <p>Nenhuma tarefa concluÃ­da ainda</p>
        </div>
    {% endif %}
</div>
{% endblock %}
